{% extends "pages/hotels/ipad_profiles/profile_details.html" %}
{% load static i18n %}

{% load my_tags %}
{% block hotel_menu_content %}
  <div class="row">
    <div class="col-md-10">
      {% include 'pages/hotels/ipad_profiles/searchbar.html' with search_view='main_feature_settings_list' hotel_id=hotel.id profile_id=profile.id %}
    </div>
  </div>

  <h3>Enabled Features</h3>

  <div class="row">
    <div class="col-md-10">
      <script src="{% static 'js/sorttable.js' %}"></script>
      {% include 'pages/hotels/ipad_profiles/table_main_feature_list.html' with main_features=main_features %}
    </div>
  </div>

  <hr>
  <h3>Disabled Features</h3>
  <div class="row">
    <div class="col-md-10">
      {% include 'pages/hotels/ipad_profiles/table_main_feature_list.html' with main_features=disabled_main_features %}
    </div>
    <div class="col-md-2">
    </div>
  </div>

{% endblock hotel_menu_content %}






{% block modal %}
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
       aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <form method="POST" action="{% url 'import_main_features' %}" enctype="multipart/form-data">
          {% csrf_token %}

          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">
              Import Main Feature JSON
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="file-loading">
              <input type="hidden" value="{{ profile.id }}" name="profile_type"/>
              <input id="input-b9" name="main_features_json" type="file">
            </div>
            <div id="kartik-file-errors"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary" title="Your custom upload logic">Import</button>
          </div>

        </form>

      </div>

    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="addFeatureLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <form method="POST" action="{% url 'main_feature_settings_add' hotel.id profile.id %}">
          {% csrf_token %}

          <div class="modal-header">
            <h5 class="modal-title" id="addFeatureLabel">
              Add Main Feature
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            {{ form.as_p }}
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary" title="Your custom upload logic">Submit</button>
          </div>

        </form>

      </div>

    </div>
  </div>

  <script>
    $(document).ready(function () {
      $("#input-b9").fileinput({
        showPreview: false,
        showUpload: false,
        elErrorContainer: '#kartik-file-errors',
        allowedFileExtensions: ["json"]
        //uploadUrl: '/site/file-upload-single'
      });
    });
  </script>

{% endblock modal %}
